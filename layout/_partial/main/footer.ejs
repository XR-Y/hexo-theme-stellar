<%
const content = theme.footer.content?.replace('{author.name}', (config.author || 'Anonymity'))?.replace('{theme.name}', stellar_info('name'))?.replace('{theme.version}', stellar_info('version'))?.replace('{theme.tree}', stellar_info('tree'))
function layoutDiv() {
  var el = ''
  el += `<footer class="page-footer${scrollreveal(' ')} footnote">`
  el += '<hr>'
  // sitemap
  if (theme.footer.sitemap && Object.keys(theme.footer.sitemap).length > 0) {
    el += '<div class="sitemap">'
    for (let group of Object.keys(theme.footer.sitemap)) {
      let items = theme.footer.sitemap[group]
      if (items == undefined || items.length == 0) {
        continue
      }
      el += '<div class="sitemap-group">'
      el += '<span class="fs15">' + group + '</span>'
      items.forEach((item, i) => {
        el += '<a href="' + url_for(md_link(item)) + '">'
        el += __(md_text(item))
        el += '</a>'
      });
      el += '</div>'
    }
    el += '</div>'
  }
  // footer
  el += '<div class="text">'
  if (content) {
    el += markdown(content)
  }
  const extractNum = str => parseInt(str.match(/\d+/)[0], 10);
  const wowWord = extractNum(totalcount(site)) / 10;
  let books = [
      { limit: 300, title: "å¸é©¬å…‰ çš„ã€Šèµ„æ²»é€šé‰´ã€‹" },
      { limit: 150, title: "é˜¿è€ çš„ã€Šå¤§æ±Ÿä¸œå»ã€‹" },
      { limit: 125, title: "é‡‘åº¸ çš„ã€Šå¤©é¾™å…«éƒ¨ã€‹" },
      { limit: 100, title: "é‡‘åº¸ çš„ã€Šç¬‘å‚²æ±Ÿæ¹–ã€‹" },
      { limit: 85, title: "è·¯é¥ çš„ã€Šå¹³å‡¡çš„ä¸–ç•Œã€‹" },
      { limit: 80, title: "æˆ‘å›½è‘—åçš„å››å¤§åè‘—ä¹‹ä¸€ã€Šæ°´æµ’ä¼ ã€‹" },
      { limit: 75, title: "æˆ‘å›½è‘—åçš„å››å¤§åè‘—ä¹‹ä¸€ã€Šçº¢æ¥¼æ¢¦ã€‹" },
      { limit: 70, title: "æˆ‘å›½è‘—åçš„å››å¤§åè‘—ä¹‹ä¸€ã€Šè¥¿æ¸¸è®°ã€‹" },
      { limit: 65, title: "è€èˆ çš„ã€Šå››ä¸–åŒå ‚ã€‹" },
      { limit: 60, title: "æˆ‘å›½è‘—åçš„å››å¤§åè‘—ä¹‹ä¸€ã€Šä¸‰å›½æ¼”ä¹‰ã€‹" },
      { limit: 50, title: "é™ˆå¿ å® çš„ã€Šç™½é¹¿åŸã€‹" },
      { limit: 45, title: "éœè¾¾ çš„ã€Šç©†æ–¯æ—çš„è‘¬ç¤¼ã€‹" },
      { limit: 43, title: "è´¾å¹³å‡¹ çš„ã€Šç§¦è…”ã€‹" },
      { limit: 40, title: "é—«çœŸ çš„ã€Šæ²§æµªä¹‹æ°´ã€‹" },
      { limit: 35, title: "ä¸œé‡åœ­å¾ çš„ã€Šç™½å¤œè¡Œã€‹" },
      { limit: 34, title: "é›¨æœ çš„ã€Šå·´é»åœ£æ¯é™¢ã€‹" },
      { limit: 32, title: "å´æ•¬æ¢“ çš„ã€Šå„’æ—å¤–å²ã€‹" },
      { limit: 31, title: "é˜¿æ¥ çš„ã€Šå°˜åŸƒè½å®šã€‹" },
      { limit: 30, title: "èŒ…ç›¾ çš„ã€Šå­å¤œã€‹" },
      { limit: 28, title: "èŒ¨å¨æ ¼ çš„ã€Šæ˜¨æ—¥çš„ä¸–ç•Œã€‹" },
      { limit: 26, title: "åŸƒå¾·åŠ Â·æ–¯è¯º çš„ã€Šçº¢æ˜Ÿç…§è€€ä¸­å›½ã€‹" },
      { limit: 25, title: "é’±é’Ÿä¹¦ çš„ã€Šå›´åŸã€‹" },
      { limit: 23, title: "ç®€Â·å¥¥æ–¯æ±€ çš„ã€Šå‚²æ…¢ä¸åè§ã€‹" },
      { limit: 22, title: "åŠ è¥¿äºšÂ·é©¬å°”å…‹æ–¯ çš„ã€Šç™¾å¹´å­¤ç‹¬ã€‹" },
      { limit: 21, title: "è€èˆ çš„ã€Šéª†é©¼ç¥¥å­ã€‹" },
      { limit: 20, title: "åˆ˜æ…ˆæ¬£ çš„ã€Šä¸‰ä½“â… ã€‹" },
      { limit: 19, title: "å¡å‹’å¾·Â·èƒ¡å¡å°¼ çš„ã€Šè¿½é£ç­çš„äººã€‹" },
      { limit: 18, title: "æ²ˆä»æ–‡ çš„ã€Šè¾¹åŸã€‹" },
      { limit: 17, title: "è§çº¢ çš„ã€Šå‘¼å…°æ²³ä¼ ã€‹" },
      { limit: 16, title: "ç‹å°æ³¢ çš„ã€Šæ²‰é»˜çš„å¤§å¤šæ•°ã€‹" },
      { limit: 15, title: "é²è¿… çš„ã€Šç‹‚äººæ—¥è®°ã€‹" },
      { limit: 14, title: "ç™½å…ˆå‹‡ çš„ã€Šå°åŒ—äººã€‹" },
      { limit: 13, title: "æ›¹ç¦º çš„ã€Šé›·é›¨ã€‹" },
      { limit: 12, title: "ä½™å çš„ã€Šæ´»ç€ã€‹" },
      { limit: 11, title: "é²è¿… çš„ã€Šå½·å¾¨ã€‹" },
      { limit: 10, title: "æ¨ç»› çš„ã€Šæˆ‘ä»¬ä»¨ã€‹" },
      { limit: 9, title: "æ—æµ·éŸ³ çš„ã€ŠåŸå—æ—§äº‹ã€‹" },
      { limit: 7, title: "é²è¿… çš„ã€Šå‘å–Šã€‹" },
      { limit: 5, title: "åŸƒå…‹è‹ä½©é‡Œ çš„ã€Šå°ç‹å­ã€‹" },
      { limit: 3, title: "ç‹å°æ³¢ çš„ã€Šé»„é‡‘æ—¶ä»£ã€‹" },
      { limit: 1, title: "ç¿ç§‹ç™½ çš„ã€Šå¤šä½™çš„è¯ã€‹" }
  ];
  let wowBook = books.find(book => wowWord >= book.limit);
  wowBook = wowBook ? `å†™å®Œä¸€æœ¬ ${wowBook.title} äº†ï¼` : "";
  let gtime_days = Math.floor((new Date() - new Date('2023.04.17 13:19:52')) / 1000 / 60 / 60 / 24);

  el += '<span style="scrollbar-width: none; color: var(--text-p2);">å‘è¡¨äº† ' + site.posts.length + ' ç¯‡æ–‡ç«  Â· </span>'
  el += '<span style="color: var(--text-p2);">æ€»è®¡ ' + totalcount(site) + ' å­— Â· </span>'
  el += '<span style="color: var(--text-p2);">' + wowBook + '</span><br>'
  el += '<span style="color: var(--text-p2);">Â© ' + new Date().getFullYear() + ' ğŸŒ–å·²ç»è¿è¡Œ '+ gtime_days + ' å¤©ğŸŒ˜' + '</span>'
  el += '</div></footer>'
  return el
}
%>
<%- layoutDiv() %>
